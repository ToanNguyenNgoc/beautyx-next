(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4882],{46574:function(t,e,n){"use strict";var i=n(70518),o=n(98216),s=n(90948),r=n(71657);const a=(0,i.Z)({createStyledComponent:(0,s.ZP)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${(0,o.Z)(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}}),useThemeProps:t=>(0,r.Z)({props:t,name:"MuiContainer"})});e.Z=a},81681:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/booking",function(){return n(82325)}])},37469:function(t,e,n){"use strict";var i=n(85893),o=(n(67294),n(9008)),s=n.n(o);e.Z=function(t){var e="https://localhost:3000",n=t.title,o=t.description,r=t.url;return(0,i.jsxs)(s(),{children:[(0,i.jsx)("title",{children:n}),(0,i.jsx)("meta",{name:"title",content:n}),(0,i.jsx)("meta",{name:"description",content:o}),(0,i.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"}),(0,i.jsx)("meta",{property:"og:type",content:"website"}),(0,i.jsx)("meta",{property:"og:url",content:"".concat(e,"/").concat(r)}),(0,i.jsx)("meta",{property:"og:title",content:n}),(0,i.jsx)("meta",{property:"og:description",content:o}),(0,i.jsx)("meta",{property:"twitter:card",content:"summary_large_image"}),(0,i.jsx)("meta",{property:"twitter:url",content:"".concat(e,"/").concat(r)}),(0,i.jsx)("meta",{property:"twitter:title",content:n}),(0,i.jsx)("meta",{property:"twitter:description",content:o})]})}},82325:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return P}});var i=n(47568),o=n(26042),s=n(69396),r=n(20414),a=n(85893),c=n(67294),_=n(84828),d=n(37469),l=n(25617),h=n(11163),u=n(73957),m=n(2275),g=n(51438),p=n(35483),b=n(1777),v=n(19212),x=n(96486),j=new function t(){(0,g.Z)(this,t),this.sendApointment=function(t){var e="organizations/"+t.orgId+"/appointments/";return p.Z.post(e,(0,o.Z)({},t.apointment),{headers:{Authorization:"Bearer "+t.token}})},this.getAppointmentById=function(t){var e="appointments/".concat(t);if(localStorage.getItem("_WEB_TK"))return p.Z.get(e,(0,b.KH)())},this.getAppoitment=function(t){var e={page:1,limit:300,"filter[time_start]":t,"filter[platform]":(0,v.E)(),append:"services",include:"organization|order|branch",sort:"-id"};return p.Z.get("appointments",(0,b.aF)(e))},this.postAppointment=function(t,e){var n=(0,x.pickBy)(t,x.identity),i="organizations/".concat(e,"/appointments");return p.Z.post(i,n,(0,b.KH)())}},k=j,f=n(2736),N=n(66345),y=n.n(N),w=n(46574),C=n(27484),Z=n.n(C),S=function(){var t,e,n,g,p,b=(0,h.useRouter)(),v=(0,m.oG)(),x=(0,l.v9)((function(t){return t.BOOKING})),j=x.order,N=x.services,C=(0,c.useState)(!1),S=C[0],P=C[1],T=(0,c.useState)(!1),I=T[0],M=T[1],A=(0,c.useState)({open:!1,content:"",children:(0,a.jsx)(a.Fragment,{})}),D=A[0],E=A[1],F=(0,c.useState)(!1),z=F[0],H=F[1];(0,c.useEffect)((function(){j||b.back()}),[]);var R,W=null===j||void 0===j?void 0:j.organization_id,X=(0,m.YE)("/organizations/".concat(W),W).response,Y=N,K=(0,c.useState)({service_ids:Y.map((function(t){return t.id})),order_id:null===j||void 0===j?void 0:j.id,time_start:"",time:"",date:Z()().format("YYYY-MM-DD"),note:"",branch_id:null===j||void 0===j||null===(t=j.branch)||void 0===t?void 0:t.id}),Q=K[0],V=K[1],U={time_start:"".concat(Q.date," ").concat(Q.time,":00"),service_ids:Y.map((function(t){return t.id})),order_id:null===j||void 0===j?void 0:j.id,note:Q.note,branch_id:Q.branch_id},q=function(t){V((0,s.Z)((0,o.Z)({},Q),{branch_id:null===t||void 0===t?void 0:t.id})),P(!1)},J=function(){var t=(0,i.Z)((function(){return(0,r.__generator)(this,(function(t){switch(t.label){case 0:if(!function(){var t=!0;return""!==Q.date&&""!==Q.time||(t=!1,E({open:!0,content:"Vui l\xf2ng ch\u1ecdn th\u1eddi gian \u0111\u1eb7t h\u1eb9n",children:(0,a.jsx)(a.Fragment,{})})),t}()||!X.id)return[3,4];H(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,k.postAppointment(U,X.id)];case 2:return t.sent(),H(!1),E({open:!0,content:"\u0110\u1eb7t h\u1eb9n th\xe0nh c\xf4ng",children:(0,a.jsxs)("div",{className:y().noti_bot,children:[(0,a.jsx)(_.dw,{title:"Xem l\u1ecbch h\u1eb9n",onClick:function(){return b.push((0,f.ri)("calendar"))}}),(0,a.jsx)(_.dw,{title:"V\u1ec1 tranh ch\u1ee7",onClick:function(){return b.push("/")}})]})}),[3,4];case 3:return t.sent(),H(!1),E({open:!0,content:"\u0110\u1eb7t h\u1eb9n th\u1ea5t b\u1ea1i !",children:(0,a.jsx)(a.Fragment,{})}),[3,4];case 4:return[2]}}))}));return function(){return t.apply(this,arguments)}}();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{title:"\u0110\u1eb7t h\u1eb9n - BeautyX",description:"\u0110\u1eb7t h\u1eb9n",url:""}),(0,a.jsx)(w.Z,{children:(0,a.jsxs)("div",{className:y().container,children:[(0,a.jsx)("div",{className:y().left_cnt,children:X&&(0,a.jsx)(_.iR,{onChangeCard:function(t){t.id===X.id?q(null):q(t)},org:X})}),(0,a.jsxs)("div",{className:y().right_cnt,children:[X&&(0,a.jsx)(B,{org:X}),Y.length>0&&(0,a.jsx)(G,{services_book:Y}),(0,a.jsxs)("div",{className:y().right_address,children:[(0,a.jsxs)("div",{className:y().right_section_head,children:[(0,a.jsx)("span",{className:y().section_title,children:"\u0110\u1ecba \u0111i\u1ec3m \u0111\u1eb7t h\u1eb9n"}),(null===X||void 0===X||null===(e=X.branches)||void 0===e?void 0:e.length)>0&&(0,a.jsx)(_.dw,{onClick:function(){return P(!0)},title:"Thay \u0111\u1ed5i",className:y().section_head_btn}),(0,a.jsx)(u.C,{open:S,setOpen:P,title:"Ch\u1ecdn \u0111\u1ecba \u0111i\u1ec3m",children:(0,a.jsxs)("ul",{className:y().list_branch,children:[(0,a.jsxs)("li",{onClick:function(){return q(null)},className:y().list_branch_item,children:[!Q.branch_id&&(0,a.jsx)("h5",{children:"\u0110\xe3 ch\u1ecdn"}),(0,a.jsx)("h4",{children:null===X||void 0===X?void 0:X.name}),(0,a.jsx)("span",{children:null===X||void 0===X?void 0:X.full_address})]}),null===X||void 0===X||null===(n=X.branches)||void 0===n?void 0:n.map((function(t){return(0,a.jsxs)("li",{onClick:function(){return q(t)},className:y().list_branch_item,children:[Q.branch_id===t.id&&(0,a.jsx)("h5",{children:"\u0110\xe3 ch\u1ecdn"}),(0,a.jsx)("h4",{children:t.name}),(0,a.jsx)("span",{children:t.full_address})]},t.id)}))]})})]}),(0,a.jsx)("span",{className:y().booking_address,children:null!==(R=null===(p=null===X||void 0===X||null===(g=X.branches)||void 0===g?void 0:g.find((function(t){return t.id===Q.branch_id})))||void 0===p?void 0:p.full_address)&&void 0!==R?R:null===X||void 0===X?void 0:X.full_address})]}),(0,a.jsxs)("div",{className:y().right_address,children:[(0,a.jsxs)("div",{className:y().right_section_head,children:[(0,a.jsx)("span",{className:y().section_title,children:"Th\u1eddi gian"}),(0,a.jsx)(_.dw,{className:y().section_head_btn,title:"Thay \u0111\u1ed5i",onClick:function(){return M(!0)}})]}),(0,a.jsxs)("span",{className:y().booking_address,children:[Q.date," -",""===Q.time?"Ch\u1ecdn gi\u1edd ":Q.time]}),(0,a.jsx)(u.C,{open:I,setOpen:M,title:"Ch\u1ecdn th\u1eddi gian",fullScreen:v,children:(0,a.jsx)(O,{dataBook:Q,setDataBook:V,setOpenTime:M,org:X})})]}),(0,a.jsxs)("div",{className:y().right_address,children:[(0,a.jsx)("div",{className:y().right_section_head,children:(0,a.jsx)("span",{className:y().section_title,children:"Ghi ch\xfa"})}),(0,a.jsx)("textarea",{onChange:function(t){return V((0,s.Z)((0,o.Z)({},Q),{note:t.target.value}))},className:y().booking_note,placeholder:"Ghi ch\xfa...",rows:4})]}),(0,a.jsx)("div",{className:y().right_bottom,children:(0,a.jsx)(_.dw,{className:y().right_bottom_btn,title:"\u0110\u1eb7t h\u1eb9n ngay",onClick:J,loading:z})})]})]})}),(0,a.jsx)(u.C,{title:"Th\xf4ng b\xe1o",open:D.open,setOpen:function(){return E({children:(0,a.jsx)(a.Fragment,{}),content:"",open:!1})},content:D.content,children:D.children})]})};S.Layout=_.g1;var B=function(t){var e=t.org;return(0,a.jsxs)("div",{className:y().right_org,children:[(0,a.jsx)("div",{className:y().org_img,children:(0,a.jsx)(_.cu,{src:e.image_url,alt:"",type:"IMG",layout:"responsive",width:"100%",height:"100%",style:{borderRadius:"100%"}})}),(0,a.jsxs)("div",{className:y().org_detail,children:[(0,a.jsx)("span",{className:y().org_name,children:e.name}),(0,a.jsx)("span",{className:y().org_address,children:e.full_address})]})]})},G=function(t){var e=t.services_book;return(0,a.jsx)("div",{className:y().right_services_cnt,children:(0,a.jsx)("ul",{className:y().services_list,children:e.map((function(t,e){return(0,a.jsxs)("li",{className:y().services_list_item,children:[(0,a.jsx)(_.cu,{src:t.image_url,alt:"",type:"IMG",layout:"fixed",width:64,height:64,style:{borderRadius:"6px"}}),(0,a.jsx)("div",{className:y().service_detail,children:(0,a.jsx)("span",{children:t.service_name})})]},e)}))})})},O=function(t){var e=t.dataBook,n=t.setDataBook,i=t.setOpenTime,r=t.org;return(0,a.jsxs)("div",{className:y().book_time_cnt,children:[(0,a.jsx)("div",{className:y().book_time_cnt_back,children:(0,a.jsx)(_.jp,{onClick:function(){return i(!1)},layout:"fixed"})}),(0,a.jsxs)("div",{className:y().picker_cnt,children:[(0,a.jsx)("div",{className:y().book_time_date,children:(0,a.jsx)(_.Mt,{onChange:function(t){n((0,s.Z)((0,o.Z)({},e),{date:t}))},disablePrev:!0})}),(0,a.jsx)("div",{className:y().book_time_time,children:(0,a.jsx)(_.jI,{datePicker:e.date,disablePrev:!0,org:r,onChange:function(t){var i=t.format("HH:mm");n((0,s.Z)((0,o.Z)({},e),{time:i}))},value:e.time})})]}),(0,a.jsx)("div",{className:y().button_cnt,children:""!==e.time&&""!==e.date&&(0,a.jsx)(_.dw,{onClick:function(){return i(!1)},title:"X\xe1c nh\u1eadn th\u1eddi gian"})})]})},P=S},66345:function(t){t.exports={container:"booking_container__F39Au",left_cnt:"booking_left_cnt__Dw_u2",right_cnt:"booking_right_cnt__G1d0P",right_org:"booking_right_org__h6yMU",org_img:"booking_org_img__gQPpd",org_detail:"booking_org_detail__kayvF",org_name:"booking_org_name__H1W7u",org_address:"booking_org_address__5CJcZ",right_services_cnt:"booking_right_services_cnt__ztesl",services_list_item:"booking_services_list_item__DIA8_",service_detail:"booking_service_detail___e_eW",right_address:"booking_right_address__AZ3OQ",right_section_head:"booking_right_section_head__UD9On",section_title:"booking_section_title__1ladG",section_head_btn:"booking_section_head_btn__bDWQd",booking_address:"booking_booking_address__eT0Ve",list_branch_item:"booking_list_branch_item__m9_na",picker_cnt:"booking_picker_cnt__yeIqr",book_time_date:"booking_book_time_date__HUqNi",book_time_time:"booking_book_time_time__S9NP3",button_cnt:"booking_button_cnt__KdyeR",booking_note:"booking_booking_note__1sVBS",right_bottom:"booking_right_bottom__XvNHt",right_bottom_btn:"booking_right_bottom_btn__QJMr5",noti_bot:"booking_noti_bot__MNDFp",book_time_cnt_back:"booking_book_time_cnt_back__G2zPi",book_time_cnt:"booking_book_time_cnt__YIuix"}}},function(t){t.O(0,[9774,2888,179],(function(){return e=81681,t(t.s=e);var e}));var e=t.O();_N_E=e}]);