(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2372],{35535:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart-payment",function(){return n(99388)}])},56603:function(t,e,n){"use strict";n.d(e,{D:function(){return a},y:function(){return i}});n(15458);var a=[{key:"PENDING",text:"Ch\u1edd thanh to\xe1n",color:"#F5D91D"},{key:"CANCELED",text:"B\u1ecb h\u1ee7y",color:"var(--text-orange)"},{key:"CANCELED_BY_USER",text:"B\u1ecb h\u1ee7y b\u1edfi ng\u01b0\u1eddi d\xf9ng",color:"var(--text-orange)"},{key:"PAID",text:"\u0110\xe3 thanh to\xe1n",color:"var(--green)"}],i={SERVICE:"App\\Models\\CI\\Service",PRODUCT:"App\\Models\\CI\\Product",COMBO:"App\\Models\\CI\\TreatmentCombo"}},99388:function(t,e,n){"use strict";n.r(e);var a=n(26042),i=n(69396),s=n(85893),_=n(11163),r=n.n(_),c=n(67294),o=n(2275),l=n(56603),d=n(84828),m=n(2736),p=n(73957),u=n(11789),h=n(37469),y=n(80139),v=n(15458),x=n(41861),g=n.n(x),b=n(27652),j=n(66174),f=n(32045);e.default=function(){var t,e,n,l,x,E=(0,_.useRouter)().query,w=(0,o.oG)(),T=(0,o.y$)().getItem,k=(0,o.Fe)().PLAT_FORM,I=(0,o.hk)(600),D=I.sec,A=I.minu_sec,M=(0,c.useState)({cancel:!1,time_refresh:2e3}),Z=M[0],R=M[1],B=(0,o.YE)("/paymentgateways/".concat(E.trans_uid,"/status"),E.trans_uid,{cancel:Z.cancel},Z.time_refresh).response;T("ORDER_STATE","session")&&(x=JSON.parse(T("ORDER_STATE","session")));var O=function(){R({cancel:!0,time_refresh:!1})};(0,c.useEffect)((function(){x||r().push("/error"),B&&"PENDING"!==(null===B||void 0===B?void 0:B.status)&&R((0,i.Z)((0,a.Z)({},Z),{time_refresh:!1})),null===B||void 0===B||B.status,0===D&&O()}),[null===B||void 0===B?void 0:B.status,D]);var P=null===x||void 0===x||null===(t=x.items)||void 0===t?void 0:t.filter((function(t){return"App\\Models\\CI\\Service"===t.productable_type})),S=function(){var t,e;(null===B||void 0===B||null===(t=B.extra_data)||void 0===t?void 0:t.deeplink)&&window.location.assign(null===B||void 0===B||null===(e=B.extra_data)||void 0===e?void 0:e.deeplink)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.Z,{title:"Thanh to\xe1n \u0111\u01a1n h\xe0ng",description:"Thanh to\xe1n \u0111\u01a1n h\xe0ng",url:"cart-payment"}),(0,s.jsx)("div",{className:g().payment_header,children:(0,s.jsxs)(f.Z,{children:[(0,s.jsx)(d.dw,{icon:j.Z.chevronLeft,title:w?"":"Tr\u1edf l\u1ea1i",iconSize:20,className:g().payment_header_back,onClick:function(){O(),r().back()}}),!w&&(0,s.jsx)(d.cu,{src:b.ZP.beautyX,alt:"",layout:"fixed",width:200,height:50,type:"ICON"}),(0,s.jsx)("h4",{children:"Thanh to\xe1n \u0111\u01a1n h\xe0ng"})]})}),(0,s.jsx)(f.Z,{children:(0,s.jsxs)("div",{className:g().payment_body,children:[(0,s.jsx)("div",{className:g().payment_body_left,children:(0,s.jsxs)("div",{className:g().payment_body_guide,children:[(0,s.jsx)("span",{className:g().payment_title,children:"Th\u1ef1c hi\u1ec7n theo h\u01b0\u1edbng d\u1eabn sau \u0111\u1ec3 thanh to\xe1n:"}),(0,s.jsxs)("ul",{className:g().payment_body_guide_step,children:[(0,s.jsxs)("li",{className:g().guide_step_item,children:[(0,s.jsx)("span",{children:"B\u01b0\u1edbc 1:"})," M\u1edf \u1ee9ng d\u1ee5ng ",(0,s.jsx)("span",{children:"MoMo"})," \u0111\u1ec3 thanh to\xe1n"]}),(0,s.jsxs)("li",{className:g().guide_step_item,children:[(0,s.jsx)("span",{children:"B\u01b0\u1edbc 2:"})," Ch\u1ecdn ",(0,s.jsx)("span",{children:'"Thanh To\xe1n"'})," v\xe0 qu\xe9t m\xe3 QR t\u1ea1i h\u01b0\u1edbng d\u1eabn n\xe0y"]}),(0,s.jsxs)("li",{className:g().guide_step_item,children:[(0,s.jsx)("span",{children:"B\u01b0\u1edbc 3:"})," Ho\xe0n th\xe0nh c\xe1c b\u01b0\u1edbc thanh to\xe1n theo h\u01b0\u1edbng d\u1eabn v\xe0 \u0111\u1ee3i ",(0,s.jsx)("span",{children:"BeautyX"})," x\u1eed l\xfd trong gi\xe2y l\xe1t"]})]}),(0,s.jsxs)("div",{className:g().payment_body_left_status,children:[(0,s.jsxs)("div",{className:g().payment_status_cnt,children:["Tr\u1ea1ng th\xe1i \u0111\u01a1n h\xe0ng",(0,s.jsx)(N,{status:null===B||void 0===B?void 0:B.status})]}),"PENDING"===(null===B||void 0===B?void 0:B.status)&&(0,s.jsxs)("div",{className:g().payment_status_count_down,children:["\u0110\u01a1n h\xe0ng s\u1ebd b\u1ecb h\u1ee7y sau : ",(0,s.jsx)("h4",{children:A})]})]}),(0,s.jsx)("div",{className:g().payment_body_left_qr,children:"PENDING"===(null===B||void 0===B?void 0:B.status)&&(null===B||void 0===B||null===(e=B.extra_data)||void 0===e?void 0:e.payUrl)&&(0,s.jsx)("iframe",{className:g().payment_qr,src:"".concat(null===B||void 0===B||null===(n=B.extra_data)||void 0===n?void 0:n.payUrl)})})]})}),(0,s.jsxs)("div",{className:g().payment_body_right,children:[(0,s.jsx)(u.wV,{hideEdit:!0}),x&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:g().payment_body_right_org,children:[(0,s.jsx)("span",{className:g().payment_title,children:"C\u1eeda h\xe0ng thanh to\xe1n"}),(0,s.jsxs)("div",{className:g().org,children:[(0,s.jsx)(d.cu,{src:x.organization.image_url,alt:"",width:56,height:56,layout:"fixed",type:"IMG",style:{borderRadius:"100%"}}),(0,s.jsxs)("div",{className:g().org_detail,children:[(0,s.jsx)("span",{className:g().org_name,children:x.organization.name}),(0,s.jsx)("span",{className:g().org_address,children:x.branch?x.branch.full_address:x.organization.full_address})]})]})]}),(0,s.jsx)("ul",{className:g().cart_payment_list,children:x.order_items.map((function(t,e){return(0,s.jsx)("li",{children:(0,s.jsx)(C,{org_id:x.organization_id,item:t})},e)}))})]})]})]})}),(0,s.jsx)("div",{className:g().cart_payment_bottom,children:(0,s.jsxs)(f.Z,{children:[(0,s.jsxs)("div",{className:g().cart_payment_bottom_price,children:["T\u1ed5ng thanh to\xe1n",(0,s.jsxs)("h1",{children:[(0,y.Z)(null===x||void 0===x||null===(l=x.payment_gateway)||void 0===l?void 0:l.amount),"\u0111"]})]}),(0,s.jsx)("div",{className:g().cart_payment_bottom_btn,children:(0,s.jsx)(d.dw,{title:"Thanh to\xe1n",onClick:function(){switch(k){case v.Z.BEAUTYX:case v.Z.MOMO:return S();case v.Z.TIKI:case v.Z.MB:return;default:!function(){var t;if(null===B||void 0===B||null===(t=B.extra_data)||void 0===t?void 0:t.deeplink){var e,n=window.open("".concat(null===B||void 0===B||null===(e=B.extra_data)||void 0===e?void 0:e.deeplink),"_blank","noopener,noreferrer");n&&(n.opener=null)}}()}}})})]})}),"PAID"===(null===B||void 0===B?void 0:B.status)&&(0,s.jsx)(p.C,{open:!0,title:"Th\xf4ng b\xe1o",content:"Thanh to\xe1n th\xe0nh c\xf4ng !",children:(0,s.jsxs)("div",{className:g().notification_btn,children:[P.length>0&&(0,s.jsx)(d.dw,{onClick:function(){return r().replace((0,m.ri)("service"))},title:"\u0110\u1eb7t h\u1eb9n ngay"}),(0,s.jsx)(d.dw,{onClick:function(){return r().replace("/")},title:"Ti\u1ebfp t\u1ee5c mua s\u1eafm"})]})}),("CANCEL"===(null===B||void 0===B?void 0:B.status)||"CANCELED_BY_USER"===(null===B||void 0===B?void 0:B.status))&&(0,s.jsx)(p.C,{open:!0,title:"Th\xf4ng b\xe1o",content:"Thanh to\xe1n th\u1ea5t b\u1ea1i! B\u1ea1n c\xf3 mu\u1ed1n ti\u1ebfp t\u1ee5c thanh to\xe1n kh\xf4ng ?",children:(0,s.jsxs)("div",{className:g().notification_btn,children:[(0,s.jsx)(d.dw,{onClick:function(){return r().replace("/cart")},title:"Ti\u1ebfp t\u1ee5c"}),(0,s.jsx)(d.dw,{title:"Ti\u1ebfp t\u1ee5c mua s\u1eafm",onClick:function(){return r().replace("/")}})]})})]})};var N=function(t){var e=t.status,n=l.D.find((function(t){return t.key===e}));return(0,s.jsx)(s.Fragment,{children:n&&(0,s.jsx)("span",{style:{backgroundColor:n.color},children:n.text})})},C=function(t){var e=t.item,n=t.org_id,a="";"App\\Models\\CI\\Service"===e.productable_type&&(a="/organizations/".concat(n,"/services/").concat(e.productable_id)),"App\\Models\\CI\\Product"===e.productable_type&&(a="/organizations/".concat(n,"/products/").concat(e.productable_id)),"App\\Models\\CI\\Combo"===e.productable_type&&(a="/organizations/".concat(n,"/combos/").concat(e.productable_id));var i=!1;e&&n&&(i=!0);var _,r,c=(0,o.YE)(a,i).response;return(0,s.jsxs)("div",{className:g().cart_payment_item,children:[(0,s.jsx)(d.cu,{src:null===c||void 0===c?void 0:c.image_url,alt:"",layout:"fixed",width:64,height:64,type:"IMG",style:{borderRadius:"6px"}}),(0,s.jsxs)("div",{className:g().cart_payment_item_de,children:[(0,s.jsx)("span",{className:g().item_name,children:null!==(r=null!==(_=null===c||void 0===c?void 0:c.service_name)&&void 0!==_?_:null===c||void 0===c?void 0:c.product_name)&&void 0!==r?r:null===c||void 0===c?void 0:c.name}),(0,s.jsxs)("div",{className:g().item_price,children:[(0,s.jsxs)("span",{children:[(0,y.Z)(null===e||void 0===e?void 0:e.base_price),"\u0111"]}),"x ",null===e||void 0===e?void 0:e.quantity]})]})]})}},41861:function(t){t.exports={payment_header:"cart-payment_payment_header__6FNqp",payment_header_back:"cart-payment_payment_header_back__BRWhi",payment_body:"cart-payment_payment_body__ggNjC",payment_body_left:"cart-payment_payment_body_left__wDNEn",payment_body_right:"cart-payment_payment_body_right__MHx4G",payment_title:"cart-payment_payment_title__7lKth",payment_body_guide_step:"cart-payment_payment_body_guide_step__Iv5LG",guide_step_item:"cart-payment_guide_step_item__w8fxV",payment_body_left_status:"cart-payment_payment_body_left_status__Y_4vt",payment_status_cnt:"cart-payment_payment_status_cnt__CENN1",payment_status_count_down:"cart-payment_payment_status_count_down__Gd3BR",payment_body_left_qr:"cart-payment_payment_body_left_qr__qHrhh",payment_qr:"cart-payment_payment_qr__CUJNv",payment_body_right_org:"cart-payment_payment_body_right_org___7hzD",org:"cart-payment_org__CDOje",org_detail:"cart-payment_org_detail__A10tg",org_name:"cart-payment_org_name__K70XS",org_address:"cart-payment_org_address___R73Z",cart_payment_list:"cart-payment_cart_payment_list__WpjNX",cart_payment_item:"cart-payment_cart_payment_item__JJ__G",cart_payment_item_de:"cart-payment_cart_payment_item_de__ADCJL",item_name:"cart-payment_item_name__TYK5_",item_price:"cart-payment_item_price__lvtgw",cart_payment_bottom:"cart-payment_cart_payment_bottom__UurM1",cart_payment_bottom_price:"cart-payment_cart_payment_bottom_price__1pag_",cart_payment_bottom_btn:"cart-payment_cart_payment_bottom_btn__Zz_pH",notification_btn:"cart-payment_notification_btn__aFVZQ"}}},function(t){t.O(0,[4885,7979,8826,164,7438,9774,2888,179],(function(){return e=35535,t(t.s=e);var e}));var e=t.O();_N_E=e}]);